{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyAmazon</title> 
    <!--  CSS  -->
    <link href ="{% static 'css/style.css' %}" rel = "stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <!-- JS -->
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.min.js" integrity="sha384-RuyvpeZCxMJCqVUGFI0Do1mQrods/hhxYlcVfGPOfQtPJh0JCw12tUAZ/Mv10S7D" crossorigin="anonymous"></script>
    <script type = 'text/javascript'>
        var user = '{{request.user}}'
        {% comment %} <!-- fix csrf cookie --> {% endcomment %}
        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }
        const csrftoken = getCookie('csrftoken');
    </script>
</head>
<body>
    <!-- <form action="" method="POST">
        
        {{form.as_p}}
        <input type="submit" value="Gửi" name="Create User"> 
    </form> -->
    <!-- Section: Design Block -->
    <section class="Container text-center text-lg-start" id="register-form">
        <style>
            .cascading-right {
            margin-right: -50px;
            }

            @media (max-width: 991.98px) {
            .cascading-right {
                margin-right: 0;
            }
            }

            button[name="register"]:hover,button[name="login"]:hover{
                color:var(--green-btn);
            }
            button.facebook:hover i{
                color: #1877F2;
            }
            button.google:hover i{
                color: #EA4335;
            }
            button.twitter:hover i{
                color: #1DA1F2;
            }
            button.github:hover i{
                color: #333333;
            }
        </style>

    <!-- Jumbotron -->
    <div class="container py-4">
        <div class=" row g-0 align-items-center">
        <div class="col-lg-6 mb-5 mb-lg-0">
            <div class="card cascading-right bg-body-tertiary" style="
                backdrop-filter: blur(30px);
                ">
            <div class="card-body p-5 shadow-5 text-center">
                <h2 class="fw-bold mb-5">Đăng ký ngay</h2>
                <form method = 'POST' action = ''>
                    {% csrf_token %}
                <!-- 2 column grid layout with text inputs for the first and last names -->
                <div class="row">
                    <div class="col-md-6 mb-4">
                        <div data-mdb-input-init class="form-outline form-floating">
                            {{form.last_name}}
                            <label class="form-label" for="form3Example2">Họ</label>
                        </div>
                    </div>
                    <div class="col-md-6 mb-4">
                        <div data-mdb-input-init class="form-outline form-floating">
                            {{form.first_name}}
                            <label class="form-label" for="form3Example1">Tên</label>
                        </div>
                    </div>
                </div>

                <!-- UserName input -->
                <div data-mdb-input-init class="form-outline mb-4 form-floating">
                    {{form.username}}
                    <label class="form-label" for="form3Example6">Tài khoản</label>
                </div>

                <!-- Email input -->
                <div data-mdb-input-init class="form-outline mb-4 form-floating">
                    {{form.email}}
                    <label class="form-label" for="form3Example3">Địa chỉ Email</label>
                </div>

                <!-- Password input -->
                <div data-mdb-input-init class="form-outline mb-4 form-floating">
                    {{form.password1}}
                    <label class="form-label" for="form3Example4">Mật khẩu</label>
                </div>
                
                <div data-mdb-input-init class="form-outline mb-4 form-floating">
                    {{form.password2}}
                    <label class="form-label" for="form3Example4">Nhập lại mật khẩu</label>
                </div>
                <!-- Checkbox -->
                {% comment %} <div class="form-check d-flex justify-content-center mb-4">
                    <input class="form-check-input me-2" type="checkbox" value="" id="form2Example33" checked />
                    <label class="form-check-label" for="form2Example33">
                        Subscribe to our newsletter
                    </label>
                </div> {% endcomment %}
                    <div class="row align-items-center">
                        <!-- Submit button -->
                    <div class = 'col'>
                        <button type="submit" name = "register" data-mdb-button-init data-mdb-ripple-init class="btn h-75 w-75">
                            Đăng ký
                        </button>
                    </div>


                    <!-- Register buttons -->
                    <div class="text-center col">
                        <p>Hoặc đăng ký với:</p>
                        <button  type="button" data-mdb-button-init data-mdb-ripple-init class="btn btn-link btn-floating mx-1 facebook">
                        <i class="fab fa-facebook-f"></i>
                        </button>

                        <button  type="button" data-mdb-button-init data-mdb-ripple-init class="btn btn-link btn-floating mx-1 google">
                        <i class="fab fa-google"></i>
                        </button>

                        <button  type="button" data-mdb-button-init data-mdb-ripple-init class="btn btn-link btn-floating mx-1 twitter">
                        <i class="fab fa-twitter"></i>
                        </button>

                        <button  type="button" data-mdb-button-init data-mdb-ripple-init class="btn btn-link btn-floating mx-1 github">
                        <i class="fab fa-github"></i>
                        </button>

                        <div class="text-center mt-3">
                            <p> Bạn đã có sẵn tài khoản? <br>
                                <a onclick="showLogin()" style = "cursor: pointer; color: var(--green-btn)">Đăng nhập ở đây</a>
                            </p>
                        </div>
                    </div>
                </div>
                </form>
            </div>
            </div>
        </div>

        <div class="col-lg-6 mb-5 mb-lg-0">
            <img src="https://mdbootstrap.com/img/new/ecommerce/vertical/004.jpg" class="w-auto rounded-4 shadow-4"
            alt="" />
        </div>
        </div>
    </div>
    <!-- Jumbotron -->
    </section>
    <!-- Section: Design Block -->

    <!-- Section: Design Block -->
    <section class="Container text-center text-lg-start" id="login-form"  style="display: none;">
        <style>
            .cascading-right {
            margin-left: -50px;
            }

            @media (max-width: 991.98px) {
            .cascading-right {
                margin-right: 0;
            }
            }
        </style>

        <!-- Jumbotron -->
        <div class="container py-4">
            <div class="row g-0 align-items-center">
                <div class="col-lg-6 mb-5 mb-lg-0">
                    <img src="https://mdbootstrap.com/img/new/ecommerce/vertical/004.jpg" class="w-100 rounded-4 shadow-4"
                    alt="" />
                </div>
                <div class="col-lg-6 mb-5 mb-lg-0">
                    <div class="card cascading-right bg-body-tertiary" style="
                        backdrop-filter: blur(30px);
                        ">
                    <div class="card-body p-5 shadow-5 text-center">
                        <h2 class="fw-bold mb-5">Đăng nhập ở đây</h2>
                        <form method = 'POST' action = '' id = "login">
                        {% csrf_token %}
                        <!-- 2 column grid layout with text inputs for the first and last names -->

                        <div data-mdb-input-init class="form-outline form-floating mb-4 ">
                            <input type="text" name="username" id="floatingUsername" class="form-control" />
                            <label class="form-label" for="floatingUsername">Tài khoản</label>
                        </div>

                        <!-- Password input -->
                        <div data-mdb-input-init class="form-outline mb-4 form-floating">
                            <input type="password" name="password" id="formPassword" class="form-control" />
                            <label class="form-label" for="formPassword">Mật khẩu</label>
                        </div>
                        
                        <div class = 'row align-items-center '>
                            <div class = 'col'>
                                <!-- Submit button -->
                                <button type="submit" name="login" data-mdb-button-init data-mdb-ripple-init class="btn h-75 w-75">
                                    Đăng nhập
                                </button>
                            </div>
    
                            <!-- Register buttons -->
                            <div class="text-center col">
                                <p>Hoặc đăng nhập với:</p>
                                <button  type="button" data-mdb-button-init data-mdb-ripple-init class="btn btn-link btn-floating mx-1 facebook">
                                <i class="fab fa-facebook-f"></i>
                                </button>
    
                                <button  type="button" data-mdb-button-init data-mdb-ripple-init class="btn btn-link btn-floating mx-1 google">
                                <i class="fab fa-google"></i>
                                </button>
    
                                <button  type="button" data-mdb-button-init data-mdb-ripple-init class="btn btn-link btn-floating mx-1 twitter">
                                <i class="fab fa-twitter"></i>
                                </button>
    
                                <button  type="button" data-mdb-button-init data-mdb-ripple-init class="btn btn-link btn-floating mx-1 github">
                                <i class="fab fa-github"></i>
                                </button>
                                {% if messages %}
                                    <div id="message-container" class="text-center mt-3">
                                        {% for message in messages %}
                                            <div class="alert alert-warning" role="alert">
                                                {{ message }}
                                            </div>
                                        {% endfor %}
                                    </div>
                                {% endif %}
                                <div class="text-center mt-3">
                                    <p>Nếu không có tài khoản ?
                                        <a style = "cursor: pointer; color: var(--green-btn)" onclick="showRegister()">Đăng ký ở đây</a>
                                    </p>
                                </div>
                            </div>
                        </div>

                        </form>
                    </div>
                </div>
            </div>

                 
            </div>
        </div>
        <!-- Jumbotron -->
    </section>
        <!-- Section: Design Block -->

        <script>
            function showLogin() {
                $("#register-form").fadeOut(300, function () {
                    $("#login-form").fadeIn(300);
                });
            }

            function showRegister() {
                $("#login-form").fadeOut(300, function () {
                    $("#register-form").fadeIn(300);
                });
            }

           {% if show_login %}
                showLogin();
            {% endif %}

            document.addEventListener("DOMContentLoaded", function () {
                if (window.location.hash === "#login-form") {
                    showLogin();
                } else if (window.location.hash === "#register-form") {
                    showRegister();
                }
            });
        </script>
</body>

</html>